> 이 글은 [백준 문제 2162번](https://www.acmicpc.net/problem/2162)을 풀이한 과정을 기록한 글입니다.

# 선분 그룹

### 1. 문제 핵심 알고리즘

- 두 선분이 교차하는지의 여부를 판단
- 유니온 파인드를 이용해 선분들을 그룹화

## 2. 선분 교차 알고리즘: 수 차례의 `틀렸습니다.` 끝에 `맞았습니다.`...!

- 위 핵심 알고리즘을 푸는 방법은 크게 두 가지이다.
  - CCW 라는 생전 처음보는 알고리즘을 사용하는 방법
    - 공식만 알면 되어서 아주 간단하다.
  - 중고등학교 때 배운 직선의 방정식, 일차 방정식의 해를 떠올려 푸는 방법
    - 조건부가 다소 복잡해진다.
- 위 두 방법 중 간단한 첫 번째 방법으로 하면 금방 풀리는 문제였지만 만약 내가 처음 이 문제를 보았다면 저 알고리즘을 떠올리기가 쉽지 않았을 것이다. 또한 의문이 들었다. 저 알고리즘을 지금 안다고 해서 저것이 범용으로 쓰이는 알고리즘일까! 그래서 나는 고집아닌 고집으로 기존에 알고 있던 수학 지식을 동원하여 문제를 풀고 싶었다. 그래서 두 번째 방법을 선택했다.

  - 이후 대략 10시간동안 머리를 싸매며 문제를 풀었다...

- 우선 나의 최종 로직이다. 최종적으로는 정말 간단하게 요약하면 y축 평행일 때와 아닐때, 기울기가 비슷할 때와 아닐 때로 구분할 수 있다.

```
점 클래스
    점 생성자
라인 클래스
    1. 라인 생성자
    2. 두 선분의 교차를 판단하는 함수(boolean)
    {
        1) 각 라인의 x 범위, y 범위를 미리 저장한다.(저장할 때 크기를 고려하지 않고 저장하여 min,max 함수 이용)

        // 여기서는 기울기를 구할 것이기 때문에 y축 평행인 경우와 아닌 경우를 생각했다.
        2) 둘 중 하나 아니면 모두가 y축 평행인 경우
        {
            1) 둘 다 y축 평행인 경우
                - x 값이 같고, y 범위가 겹치는 경우 true
                - 아니면 false
            2) 하나만 y축 평행인 경우
                - x값이 y축 평행이 아닌 선분의 x 범위 안에 있는지 확인
                    - 포함이 안되면 false
                - 두 선분이 직선이라고 생각하고 교점을 구한다.
                    - 구한 y 값이 두 선분의 y 범위 안에 모두 있는지 확인
                        - 포함되면 true
                        - 포함이 안되면 false
        }
        3) y축 평행인 선분이 없는 경우
        {
            1) 기울기가 비슷한 경우
                - 두 선분을 직선이라 생각했을 때 일치하고, 두 선분의 x 범위, y 범위가 각각 겹치는 경우 true
                - 아니면 false
            2) 기울기가 비슷하지 않은 경우
                - 두 선분을 직선이라 생각했을 때 교점을 구한다.
                    - 구한 교점이 두 선분의 x 범위, y 범위 안에 각각 있는지 확인
                        - 포함되면 true
                        - 포함이 안되면 false
        }
    }


메인 클래스
    1. 초기화 함수
    2. 유니온 파인드 함수들
    3. 입력 및 출력 메인 함수
    ...
```

- 문제를 풀면서 의식하지 못했던 문제들
  - 곱셈, 더하기 했을 때의 오버플로우 문제
    - 변수의 범위 확인하기. 연산 초과 의심!!
  - 정수 나누기, 실수 나누기의 차이
    - 계속 정수로 다루고 있었다. 실수를 사용하지 않으려고 식을 더 복잡하게 만들고 있었다.
    - 실수 사용에도 익숙해지자.
    - **방정식으로 풀면 소수점 오차가 생겨서 오류가 발생할 수도 있다고한다.**
    - **실제로 오차때문에 틀렸다고 나온 경우가 대부분인 것 같다.**
  - 불필요한 크기 비교 함수 호출: max, min 생각해보자.
  - 좁은 범위 말고 더 크게 생각해보는 연습 가지기
    - 계속 좁은 범위에서 개발하면서 필요한 함수만 생각했다.
    - 더 넓게 보면서 구조를 짜야겠다.
